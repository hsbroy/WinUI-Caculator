# 規格（Spec）：進階小算盤（Executable Spec）

目的：規格描述「我們要做什麼」與「何為完成」，不包含實作細節。此文件用以直接對應到可執行的單元測試與驗收標準。

## 使用者故事

US-001: 基本運算
- 作為一名一般使用者，我希望能進行加、減、乘、除，以處理日常計算。

US-002: 科學函數
- 作為一名學生，我希望能使用 sin/cos/tan/log/ln/pow/sqrt 等函數，以完成數學題目。

US-003: 防呆與錯誤回饋
- 當輸入會導致未定義或錯誤的運算（例如除以零、log(-1)），系統應提供友善錯誤提示且不當掉。

## 驗收標準（可測試）
- AC-001：對於一般合法輸入，`Calculate` 應回傳與數學一致的數值，允許誤差容錯 1e-9。
- AC-002：除以零應回傳錯誤狀態，ViewModel 顯示文字 "Cannot divide by zero"，且不拋未處理例外。
- AC-003：對於定義域外輸入（如 log(-1) 或 sqrt(-1)），應回傳錯誤狀態，ViewModel 顯示 "Error" 或更具體的錯誤訊息。
- AC-004：切換標準/科學模式時，當前輸入重置為 0。
- AC-005：所有被 UI 使用的 public ViewModel 屬性/方法需有 XML 註解。

## 需在澄清階段鎖定的決策
- 浮點數策略：內部以 `double` 計算，測試以誤差容錯 1e-9 比對，顯示格式預設保留最多 8 位小數（或必要時使用科學記號）。
- 錯誤回傳：計算引擎回傳 `CalculationResult`（包含 `Value`、`IsError`、`Message`），ViewModel 決定如何顯示。
- 切換模式行為：切換時將 display 設為 "0" 並清除暫存運算符。

## 非範圍（Out of Scope）
- 本版本不支援雲端同步、語音輸入或矩陣運算等進階功能。

## 規格檢核清單
- [ ] 規格中不含實作細節（例如類別或資料庫設計）。
- [ ] 每條驗收標準皆可被單元測試驗證。
- [ ] 所有需澄清事項於澄清階段被鎖定。

## 可追蹤性
- 每一條 AC 將對應到一或多個單元測試（在 `WinUI_Calculator.Tests` 專案中）。
